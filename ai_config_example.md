# KDAS AI智能推荐配置指南

## 概述
KDAS AI智能推荐功能支持多种先进的大语言模型来分析股票技术数据，并推荐最佳的KDAS日期设置。这个功能特别适合技术分析新手，可以大幅降低使用门槛。

## 功能特点
- 🧠 **多模型支持**: 支持DeepSeek-R1、Gemini-2.5等多种AI模型
- 📊 **多维度数据**: 分析价格、成交量、趋势、支撑阻力位等
- 🎯 **专业推荐**: 遵循KDAS交易体系原理
- 📈 **关键点识别**: 自动识别价格突破、趋势转折、异常成交量等
- 🔍 **置信度评估**: 提供推荐的可信度评级
- ⚡ **灵活选择**: 用户可根据需求选择不同特点的AI模型

## API密钥配置

### 方法一：在应用界面中输入（推荐）
1. 在KDAS应用的侧边栏找到"🤖 AI智能推荐"区域
2. 在"OpenAI API密钥"输入框中输入您的API密钥
3. 密钥格式：`sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx`

### 方法二：环境变量配置
在系统环境变量中设置：
```bash
# Windows
set OPENAI_API_KEY=sk-your-api-key-here

# macOS/Linux
export OPENAI_API_KEY=sk-your-api-key-here
```

### 方法三：Streamlit Secrets配置
在项目目录创建`.streamlit/secrets.toml`文件：
```toml
OPENAI_API_KEY = "sk-your-api-key-here"
```

## 获取OpenAI API密钥

1. 访问 [OpenAI官网](https://platform.openai.com/)
2. 注册并登录账户
3. 进入 API Keys 页面
4. 点击 "Create new secret key" 创建新密钥
5. 复制生成的密钥（格式：sk-...）

## 使用步骤

1. **配置API密钥**（见上述方法）
2. **选择证券类型和代码**
3. **选择AI模型**（deepseek-r1、gemini-2.5-flash-preview-05-20、gemini-2.5-pro-preview-03-25）
4. **点击"🧠 AI智能推荐日期"按钮**
5. **等待AI分析完成**（通常需要10-30秒）
6. **查看推荐结果和分析理由**
7. **点击"📅 应用AI推荐日期"**
8. **进行KDAS分析**

## 🤖 AI模型选择指南

### DeepSeek-R1
- **特点**: 推理能力强，逻辑分析深入
- **适用场景**: 复杂技术分析，需要深度推理的场景
- **优势**: 在技术指标分析和趋势判断方面表现优秀
- **推荐**: 适合有一定技术分析基础的用户

### Gemini-2.5-Flash-Preview-05-20
- **特点**: 响应速度快，处理效率高
- **适用场景**: 快速分析，日常使用
- **优势**: 速度快，成本相对较低
- **推荐**: 适合频繁使用或对响应速度要求高的用户

### Gemini-2.5-Pro-Preview-03-25
- **特点**: 专业分析能力强，结果更全面
- **适用场景**: 重要投资决策，深度分析需求
- **优势**: 分析更全面，推荐理由更详细
- **推荐**: 适合重要投资决策时使用

## AI推荐原理

### 技术分析维度
- **价格统计**: 当前价格、最高/最低价、波动率等
- **成交量分析**: 平均成交量、成交量趋势、异常放量日期
- **趋势分析**: 短期、中期、长期趋势方向
- **关键价格点**: 局部高点、低点、突破点
- **支撑阻力位**: 重要的价格支撑和阻力水平

### 日期选择标准
AI会优先选择以下类型的关键日期：
1. **重要价格突破点** - 突破关键阻力或支撑位的日期
2. **明显趋势转折点** - 上升趋势转为下降或相反的转折日
3. **异常成交量日期** - 成交量显著放大的交易日
4. **重要技术形态** - 重要的技术图形形成点
5. **市场情绪转换** - 明显的市场情绪变化时点

### 置信度说明
- **🟢 HIGH**: AI对推荐结果非常有信心，技术依据充分
- **🟡 MEDIUM**: AI推荐有一定依据，但存在不确定性
- **🟠 LOW**: AI推荐仅作参考，建议结合人工分析

## 注意事项

### API使用成本
- GPT-4o调用会产生费用（通常每次分析成本在$0.01-0.05之间）
- 建议合理使用，避免频繁重复分析同一标的

### 推荐结果参考性
- AI推荐仅供参考，不构成投资建议
- 建议结合个人投资经验和风险偏好
- 重要决策前请咨询专业投资顾问

### 数据要求
- 需要足够的历史数据（建议至少3-6个月）
- 数据质量会影响AI分析的准确性
- 新上市证券可能推荐效果有限

## 故障排除

### 常见问题
1. **API密钥无效**: 检查密钥格式和有效性
2. **网络超时**: 检查网络连接，稍后重试
3. **余额不足**: 检查OpenAI账户余额
4. **数据不足**: 确保选择的证券有足够历史数据

### 备用方案
当AI推荐失败时，系统会自动提供智能备用日期方案：
- 基于数据长度自动选择有代表性的时间点
- 确保日期间隔合理，覆盖不同市场阶段

## 技术支持

如遇到问题，请检查：
1. API密钥配置是否正确
2. 网络连接是否稳定
3. OpenAI服务是否正常
4. 证券代码是否有效
5. 数据是否充足

## 更新日志

- **v1.0** - 初版发布，支持基础AI推荐功能
- 基于GPT-4o模型的专业技术分析
- 支持股票、ETF、指数三种证券类型
- 提供详细的推荐理由和置信度评估 