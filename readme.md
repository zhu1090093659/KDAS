# 📈 KDAS股票分析工具

一个基于 Streamlit 的交互式股票分析工具，可以绘制股票K线图和关键日均线（KDAS）指标。

## ✨ 功能特性

- 🔍 **交互式界面**: 基于 Streamlit 的现代化 Web 界面
- 📊 **实时数据**: 通过 AKShare 获取最新的A股市场数据
- 📈 **K线图表**: 使用 Plotly 生成专业的 K线图和成交量图
- 🎯 **KDAS指标**: 支持最多5个关键日期的累计成交量加权平均价格计算
- 💾 **数据缓存**: 自动缓存股票数据，提高查询效率
- 🎨 **优化展示**: 图例位于左上角，支持点击切换显示/隐藏

## 🚀 快速开始

### 1. 安装依赖

```bash
pip install -r requirements.txt
```

### 2. 运行应用

#### 方法一：使用启动脚本
```bash
python run_app.py
```

#### 方法二：直接运行 Streamlit
```bash
streamlit run KDAS.py
```

### 3. 使用应用

1. 在浏览器中打开 http://localhost:8501
2. 在左侧边栏输入股票代码（如：000001、300001、001215等）
3. 选择5个关键的分析日期
4. 点击「🔍 开始分析」按钮
5. 查看生成的交互式图表和数据

## 📋 系统要求

- Python 3.7+
- 网络连接（用于获取股票数据）

## 📊 KDAS指标说明

KDAS（Key Date Average Settlement）是基于关键日期的累计成交量加权平均价格指标：

- 从指定的关键日期开始计算累计成交额和成交量
- KDAS = 累计成交额 / 累计成交量 / 100
- 不同颜色的线条表示从不同日期开始计算的KDAS值

## 🎨 界面功能

### 侧边栏
- 股票代码输入
- 5个关键日期选择器（带颜色标识）
- 分析按钮

### 主界面
- 股票基本信息展示（名称、代码、最新价格、涨跌）
- 交互式K线图和KDAS指标图
- 成交量柱状图
- KDAS数据详情表格

### 图表交互功能
- 缩放和平移
- 图例点击切换
- 鼠标悬停显示详细数据
- 十字光标追踪

## 📁 文件结构

```
KDAS/
├── KDAS.py              # 主应用程序
├── run_app.py          # 启动脚本
├── requirements.txt    # 依赖包列表
├── readme.md          # 项目说明
├── get_index.py       # 其他工具脚本
└── shares/            # 数据缓存目录
    └── *.csv          # 股票数据缓存文件
```

## 🔧 技术栈

- **Streamlit**: Web 应用框架
- **Plotly**: 交互式图表库
- **AKShare**: 股票数据获取
- **Pandas**: 数据处理
- **Python**: 主要编程语言

## 📞 支持

如有问题或建议，请查看代码中的使用说明或联系开发者。
